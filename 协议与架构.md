#协议
#标准
#架构

# 协议
## IEEE802.11-无线局域网标准

**无线速率计算公式：**
![](images/Pasted%20image%2020250715205500.png)

速率子载波数目子载波携带的数据位码率每个符号持续时间空间流数

![img](file://D:/AAA/%E9%80%9A%E4%BF%A1%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/images/v2-6b31dc18eb4425526bdb064d951d5bf6_r.jpg?lastModify=1752581950)

### 802.11a协议 5GHz OFDM

传输速度快，受干扰少，价格昂贵。市场不普及

### 802.11b协议 2.4GHz（应用最广）

无线局域网一个标准，载波频率为2.4GHZ，传输速度为11Mbit/s

在2.4-GHz-ISM频段共有14个频宽为22MHz的频道可供使用。IEEE802.11b的后继标准是IEEE802.11g；

![img](file://D:/AAA/%E9%80%9A%E4%BF%A1%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/images/30853936fc9138274632c5a0782c0812.png?lastModify=1752581950)

### 802.11g协议 2.4GHZ OFDM

载波频率为2.4GHZ，原始传送速度为54Mbit/s，净传输速度为24.7Mbit/s

### 802.11n协议 （Wi-Fi 4）2.4/5GHz MIMO

a+g之上，速率提升，理论速率最高600Mbps，可以工作在2.4GHZ和5GHZ两个频段

![img](file://D:/AAA/%E9%80%9A%E4%BF%A1%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/images/v2-af6cf1201183b2331a4b88034dc8b1c5_r.jpg?lastModify=1752581950)

![img](file://D:/AAA/%E9%80%9A%E4%BF%A1%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/images/v2-728e109ff660e9526ab75caface7ab5c_r.jpg?lastModify=1752581950)

### 802.11ac协议 （Wi-Fi 5）5GHz MU-MIMO

IEEE 802.11ac，是一个802.11无线局域网（WLAN）通信标准，它通过5GHz频带（也是其得名原因）进行通信。理论上，它能够提供最多1Gbps带宽进行多站式无线局域网通信，或是最少500Mbps的单一连接传输带宽。802.11ac是802.11n的继承者。

![img](file://D:/AAA/%E9%80%9A%E4%BF%A1%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/images/v2-5433f08f9e8fc8352ccc28d72727addf_r.jpg?lastModify=1752581950)

### **802.11ax Wi-Fi6**

第7代无线技术，也称为高效无线网络，通过一系列系统特性和多种机制增加系统容量，通过更好的一致覆盖和减少空口介质拥塞来改善Wi-Fi网络的工作方式，为更多的用户提供一致和可靠的数据吞吐量，其目标是将用户的平均吞吐量提高至少4倍。也就是说基于802.11ax的Wi-Fi网络意味着前所未有的高容量和高效率。

![image-20250715144914235](file://D:/AAA/%E9%80%9A%E4%BF%A1%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/images/image-20250715144914235.png?lastModify=1752581950)


# 5G核心网架构

## 3GPP-23501-g10



### 5G系统架构：

![image-20250709144423284](https://raw.githubusercontent.com/wangnianrui2333/my-image-bed/master/img/image-20250709144423284.png?token=AYLFGPCD54LND6GZR5IDQ7LINYIAI)

![image-20250709144451445](https://raw.githubusercontent.com/wangnianrui2333/my-image-bed/master/img/image-20250709144451445.png?token=AYLFGPBURJWZPVDTEMICFOLINYICA)

网络功能通过服务接口进行通信，灵活且模块化

主要网络功能NF：

**AMF（接入与移动性管理功能）**：负责用户注册、连接管理和移动性管理。

**SMF（会话管理功能）**：管理用户数据会话（如 PDU 会话），分配 IP 地址，控制 UPF。

**UPF（用户平面功能）**：处理用户数据转发，支持 QoS 和数据路由。

**PCF（策略控制功能）**：制定网络策略，如 QoS 和计费规则。

**UDM（统一数据管理）**：存储用户订阅数据，类似 4G 的 HSS。

**NEF（网络开放功能）**：将网络能力开放给第三方应用。

**NRF（网络功能注册）**：管理网络功能的注册和发现。

其他功能如 AUSF（认证服务器）、NSSF（网络切片选择）等。

**用户平面与控制平面分离**：用户数据通过 UPF 传输，控制信令由 AMF、SMF 等处理，提高效率和灵活性。

**支持多接入技术**：包括 3GPP 接入（如 NR、E-UTRAN）和非 3GPP 接入（如 Wi-Fi）。

**网络切片（Network Slicing）**：为不同应用（如物联网、自动驾驶、超高清视频）提供定制化网络服务，每个切片有独立的资源和 QoS。

**移动性管理**：

- 支持无缝切换（3GPP 和非 3GPP 间）。
- 引入 MICO 模式（Mobile Initiated Connection Only），适合低功耗物联网设备。
- 提供注册管理（RM）和连接管理（CM）状态机。

**会话与服务连续性（SSC）**：支持不同场景下会话的连续性（如 IP 地址保持或动态变化）。

**QoS（服务质量）**：

- 定义 5QI（5G QoS 标识符），为不同服务（如语音、视频、游戏）提供特定延迟、带宽和错误率保障。
- 支持 GBR（保证比特率）和非 GBR 流。

**策略与计费**：通过 PCF 实现动态策略控制，支持基于应用的计费和流量管理。

**安全性**：采用 NAS（非接入层）加密和完整性保护，支持 5G-AKA 和 EAP 认证框架。

**UDR（统一数据仓库）**：集中存储订阅数据、策略数据和应用数据。

**UDSF（非结构化数据存储功能）**：支持灵活存储非标准化数据。

**数据隔离与访问控制**：确保不同网络功能或切片的数据安全性。

**控制平面协议**：

- NAS-MM（移动性管理）：处理注册和连接管理。
- NAS-SM（会话管理）：管理 PDU 会话的建立、修改和释放。
- NG-AP（NG 应用协议）：用于 AMF 和 RAN 间的信令。

**用户平面协议**：

- GTP-U：用于 UPF 和 RAN 间的数据隧道。
- PDU 层：支持 IPv4、IPv6 或以太网帧传输。

**ATSSS（接入流量引导、切换与分割）**：支持 3GPP 和非 3GPP 接入间的流量分配（如 MPTCP 或 MPQUIC 协议）。

**边缘计算**：通过 UPF 的本地分流，将数据处理靠近用户，降低延迟。

**多播/广播服务**：支持 5G MBS（Multicast-Broadcast Services）。

**ProSe（邻近服务）**：支持设备间直接通信。

**无人驾驶航空系统（UAS）**：提供连接、识别和跟踪支持。

**5GS 与 EPC 互连**：支持 5G 和 4G 间的切换，涉及 N26 接口（AMF 与 MME 间）。

**平滑迁移**：允许设备在 5G 和 4G 网络间无缝移动。



### 数据存储架构：

![image-20250709144518095](https://raw.githubusercontent.com/wangnianrui2333/my-image-bed/master/img/image-20250709144518095.png?token=AYLFGPDKCGQXHQ5XMJNTVYTINYIDW)



## 3GPP-23214

EPC节点的控制和用户平面分离的架构增强

### 功能拆分：

**控制面CP：SGW-C/PGW-C/TDF-C**

控制信息传输：处理会话管理（建立、修改、释放承载）、策略控制、功能协调与CP/UP元信息传递等。

**用户面UP：SGW-U/PGW-U/TDF-U**

用户数据传输：实际执行数据转发、GTP-U隧道终端、QoS执行、计费报告、流量检测等。



**控制面与用户面之间接口：Sx**

用于承载分离后CP向UP传递F‑TEID、QoS、PDR/FAR/QER 等配置

**标准化流程：**

会话建立、修改、终止

使用报告机制URR由UP向CP上报使用量或事件

TDF可选择主动上报模式



## 网络切片

3G对业务进行分类：

![img](https://raw.githubusercontent.com/wangnianrui2333/my-image-bed/master/img/8192509c925a080e4e368a67c1a9b4c5.png?token=AYLFGPH4LN3VPITYEFHSK2DIN6AX6)

4G 定义了9种基本的QoS等级：

**![image-20250710170348378](C:\Users\1\AppData\Roaming\Typora\typora-user-images\image-20250710170348378.png)**

5G三大应用场景：

![img](https://raw.githubusercontent.com/wangnianrui2333/my-image-bed/master/img/adc31f6830290eaf6124bf6f7b019625.jpeg?token=AYLFGPHQNKOFWA7YGQJPZTDIN6BLQ)

5G网络切片划分：

![img](https://raw.githubusercontent.com/wangnianrui2333/my-image-bed/master/img/8ddf043fc25fe534301b93647d2754bb.jpeg?token=AYLFGPDZW2NVEVQLLHUJRHDIN6BVW)

实现各个模块的统一管理和资源切分：NFV技术和SDN技术

NFV技术：虚拟化技术

硬件抽象为计算、存储和网络

![img](https://raw.githubusercontent.com/wangnianrui2333/my-image-bed/master/img/038ae4b5337ff2c7e290a819276f7293.jpeg?token=AYLFGPAZ6YMS5B2XGT6ZUT3IN6CMM)

SDN技术：软件定义网络

引入了控制器

![img](https://raw.githubusercontent.com/wangnianrui2333/my-image-bed/master/img/634a3581ffadfb80900efc74940ea3e2.jpeg?token=AYLFGPHGOQQF2FO5ZX6AL2LIN6CPE)



5G端到端网络切片及统一管理：

纵向子切片自身管理，横向各功能端到端。横向协同，纵向到底

![img](https://raw.githubusercontent.com/wangnianrui2333/my-image-bed/master/img/900a59804cfef6b7391f0567caf643ff.jpeg?token=AYLFGPAWITPU74KC7NB7L7DIN6ESI)



## QoS流管理   #QoS流
**QoS**：服务质量
**qos流**：5G中用户面数据流的基本管理单元。每个qos流都与一个qos标识符QFI关联，由核心网进行控制和映射。

在网络通信中，不同应用（如视频通话、在线游戏、文件下载、电子邮件等）对网络资源的需求存在显著差异。**QoS 流管理（Quality of Service Flow Management）** 是一套通过技术手段优化网络资源分配、保障关键业务体验的核心机制。它通过对网络流量的识别、分类、调度和控制，确保有限的网络资源优先满足高优先级应用的需求，同时平衡整体网络的效率与公平性。

### **意义**：
网络资源是有限的，不用应用对网络性能的需求差异大
**实时交互类应用**（视频会议、语音通信、在线游戏）：时延、抖动、丢包率高度敏感
**大带宽类应用**（高清视频点播、文件下载）：带宽要求高，短时延迟容忍度高
**普通数据类应用**（网页浏览、电子邮件）：带宽和时延要求低

### 分类：
1.GBR流：保证比特率，适用于语音、实时视频等对时延和带宽要求比较高的业务
2.Non-GBR流：不保证比特率，适用于网页浏览、社交媒体等业务。

### 关键技术
#### 1.流识别
- 基于五元组（源IP、目的IP、源端口、目的端口、协议类型）识别流
- 可通过 DPI（深度包检测）对应用层协议识别（如HTTP、VoIP等）
#### 2.分类
- 将识别出的流按照业务类型、用户等级、协议等分类
- 每类业务被赋予不同的服务策略（如高优先级、低延迟）
#### 3.标记
- 利用 IP 报文头中的字段（如 DSCP, ToS, 802.1p）对数据包打上 QoS 标签
- 标记信息可供下游网络设备参考执行调度
#### 4.排队与调度
- 将不同业务流放入不同队列
- 使用调度算法（如FIFO、WFQ、PQ、DRR）决定发送顺序和带宽分配
#### 5.拥塞管理
- 当资源紧张时控制哪些流优先转发，哪些流丢弃或延迟
- 例如 RED（随机早期检测）、WRED（加权RED）
#### 6.流量整形与速率限制
- **整形（Shaping）**：平滑突发流量，使其符合预设速率（不会立即丢包）
- **速率限制（Policing）**：严格限速，超出部分直接丢弃或降级服务

### 标准支持
IPv4/IPv6 层的 DSCP
MPLS 网络的 EXP 字段：承载qos信息并进行优先级调度
3GPP QoS 流（5G核心网）


### 调度算法
#### FIFO 
先来先服务，不区分流
#### PQ 优先队列
不同流进入不同优先级队列，高优先级先处理
#### WFQ加权公平队列
按权重公平分配带宽，兼顾公平和差异化
#### DRR
处理可变长度报文时更加高效

### 应用场景
1.企业园区网络
2.运营商网络
3.车辆网
4.工业互联网


# SDN技术和NFV技术
## SDN 软件定义网络

SDN是可以摆脱硬件对网络架构的限制，可以像升级、安装软件一样对网络进行修改，一种将控制面与数据面分离的方式，实现网络集中控制和灵活编码的技术架构。
本质是：网络软件化，提升网络可编程能力

控制面：决定数据如何转发（路由、策略）
数据面：实际负责数据包的转发（交换机、路由器）

### 传统网络与SDN
#### 传统网络
分布式控制的架构，每个设备都包含独立的控制平面、数据平面
分布式控制过程：路由计算和拓扑变化后，每台设备都要重新进行路由计算过程
在传统IP网络中，每台设备都是独立收集网络信息，独立计算，并且都只关心自己的选路。

**传统网络架构：**

| 平面   |        | 功能                      | 部署   |
| ---- | ------ | ----------------------- | ---- |
| 管理平面 | 设备管理系统 | 网络拓扑、设备接口、设备特性的管理       | 网管系统 |
|      | 业务管理系统 | 对业务进行管理（业务性能监控、业务告警管理等） |      |
| 控制平面 |        | 网络控制，协议处理与计算            | 每个设备 |
| 数据平面 |        | 设备根据控制平面的指令完成用户业务的转发和处理 | 每个设备 |
**传统网络局限性：**
- 流量路径的灵活调整能力不足。
- 网络协议实现复杂，运维难度较大。
- 网络新业务升级速度较慢

**传统网络协议：**
IGP/BGP/MPLS/组播协议等，私有协议

#### SDN

**分类：**
- 控制与转发分离 （超广义）
- 管理与控制分离 （广义）

**主要特征：**
1.转控分离：网元的控制平面在*控制器*上，负责协议计算，产生流表；而转发平面只在*网络设备*上。
2.集中控制：设备网元通过控制器集中管理和下发流表，这样就不需要对设备进行逐一操作，只需要对控制器进行配置即可。
3.开放接口：第三方应用只需要通过控制器提供的开放接口，通过编程方式定义一个新的网络功能，然后在控制器上运行即可。

SDN控制器既不是网管，也不是规划工具

**网络架构：**
集中控制
![](images/Pasted%20image%2020250717162953.png)

|      | 作用                                                    | 典型应用          |
| ---- | ----------------------------------------------------- | ------------- |
| 应用层  | 体现用户意图的各种上层应用程序（协同层应用程序）                              | OSS、openstack |
| 控制层  | 系统的控制中心，负责网络的内部交换路径和边界业务路由的生成，处理网络状态变化事件              |               |
| 转发层  | 由转发器和连接器的线路构成基础转发网络，负责执行用户数据的转发，转发过程中所需要的转发表项是由控制层生成的 |               |
| 北向接口 | 应用层和控制层通信的接口，应用层通过控制开放的API，控制设备转发功能                   |               |
| 南向接口 | 控制层和数据层通信的接口，控制器通过OpenFlow或其他协议下发流表。                  |               |

**部署方式：**
1.underlay的网络
openflow或定制BGP下发
2.overlay的网络
不支持openflow，私有定制协议不能部署时，要用[[概念类/隧道技术]]
基础网络用传统网络形式，通过路由协议打通各节点；服务器接入点用隧道技术将数据报文进行封装或解封装

**价值：**
1.网络业务快速创新
2.简化网络
3.网络设备白牌化
4.业务自动化
5.网络路径流量优化

**关键协议：**
[[概念类/openflow]]

## NFV 网络功能虚拟化
一种网络架构
通过软件化和虚拟化技术来替代传统网络硬件设备
把本来跑在专用硬件上的网络功能，变成**软件应用**，运行在**标准服务器**或**虚拟机/容器**里。

**作用：**

| 功能          | 原设备     | NFV中的虚拟功能名VNF   |
| ----------- | ------- | --------------- |
| 防火墙         | 专用防火墙设备 | vFW             |
| 路由器         | 专用路由器   | vRouter         |
| [[概念类/DPI]] | 深度检测设备  | vDPI            |
| 负载均衡        | 硬件负载均衡器 | vLoaderBalancer |

**NFV架构**
![](images/Pasted%20image%2020250718112404.png)

NFV有统一的标准，实现各种网络功能的标准化软件必须能够应用在同一台硬件设备上。

|         模块         |                            作用                             | 内部结构                                              |
| :----------------: | :-------------------------------------------------------: | ------------------------------------------------- |
| 基础网络虚拟化架构**NFVI**  | 给硬件设备赋予基本的组件，支持网络应用所需要的软件胡总和容器管理平台。是标准化的架构，支持不同VNF之间获得通用性 |                                                   |
|   虚拟网络功能**VNF**    |          虚拟机及部署在虚拟机上的业务网元、网络功能软件，实现网络功能的软件应用，app          | **Virtualization Layer**：虚拟化层，主要完成对硬件资源的抽象，形成虚拟资源 |
|                    |                                                           | **Hardware**：硬件层，包括提供计算、网络、存储资源能力的硬件设备。           |
| 管理自动化及网络编排**MANO** |           管理各VNF和NFVI之间的同意框架，方便运维人员进行业务编排和设备管理            | **NFVO**：实现对整个NFV基础架构、软件资源、网络服务的编排和管理             |
|                    |                                                           | **VNFM**：VNF管理模块，主要对VNF的生命周期（实例化、配置、关闭等）进行控制。     |
|                    |                                                           | **VIM**：NFVI管理模块，主要功能包括：资源的发现、虚拟资源的管理分配、故障处理等。    |
|    **OSS/BSS**     |   服务提供商的管理功能，不属于NFV框架内的功能组件，但MANO和网元需要提供对OSS/BSS 的接口支持    |                                                   |

**与传统物理网元相比：**
![](images/Pasted%20image%2020250718152841.png)
**NFV优势：**
适用于各种网络解决方案，包括SDWAN、网络切片、移动边缘计算等

## NFV和SDN对比：
**不同点：**
![](images/Pasted%20image%2020250718153654.png)
**相同点：**
- 都以实现网络虚拟化为目标，实现物理设备的资源池化。
- 都提升了网络管理和业务编排效率。
- 都希望通过界面操作或者编程语言来进行网络编排。

